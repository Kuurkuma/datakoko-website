{{ define "main" }}
<div class="hero">
    <h1>{{ .Title }}</h1>
    {{ with .Params.subtitle }}
    <p class="subtitle">{{ . }}</p>
    {{ end }}
    <a href="{{ relLangURL "contact" }}" class="cta-button">{{ i18n "contactUs" }}</a>
    {{ with .Params.tagline }}
    <p class="tagline">{{ . }}</p>
    {{ end }}
</div>

<!-- Intro Section -->
{{ with .Params.intro }}
<section class="intro-section">
    <p><strong>{{ $.Title }}.</strong> {{ . | markdownify }}</p>
</section>
{{ end }}

<!-- Challenges Section -->
<section class="challenges-section">
    <h2>{{ i18n "theChallenge" }}</h2>
    <p class="section-subtitle">{{ i18n "challengeSubtitle" }}</p>
    <div class="challenges-grid">
        {{ range (where .Site.RegularPages "Section" "challenges") }}
        <div class="challenge-item">
            {{ with .Params.icon }}
            <span class="challenge-icon">{{ . }}</span>
            {{ end }}
            <h3>{{ .Title }}</h3>
            <p>{{ .Content }}</p>
        </div>
        {{ end }}
    </div>
</section>

<!-- Approach Section -->
{{ with .Params.approach_title }}
<section class="approach-section">
    <h2>{{ . }}</h2>
    <p class="approach-text">{{ $.Params.approach_text | markdownify }}</p>
    {{ with site.GetPage "section" "approach" }}
    <p><a href="{{ .RelPermalink }}" class="feature-link">{{ i18n "discoverApproach" }} →</a></p>
    {{ end }}
</section>
{{ end }}

<!-- Services Section -->
<section class="services-section">
    <h2>{{ i18n "ourServices" }}</h2>
    <div class="features">
        {{ range (where .Site.RegularPages "Section" "services") }}
        <a class="feature feature-card-link" href="{{ .RelPermalink }}">
            {{ with .Params.icon }}
            <div class="feature-icon">{{ . }}</div>
            {{ end }}
            <h3>{{ .Title }}</h3>
            <p>{{ .Params.summary | default .Summary }}</p>
            <span class="feature-link">{{ i18n "learnMore" }} →</span>
        </a>
        {{ end }}
    </div>
</section>

<!-- Tech Stack Section -->
<section class="tech-stack-section">
    <h2>{{ if eq .Language.Lang "fr" }}Notre Stack Technique{{else}}Our Tech Stack{{end}}</h2>
    <p class="section-subtitle">{{ if eq .Language.Lang "fr" }}Technologies modernes et éprouvées pour votre infrastructure data{{else}}Modern, proven technologies for your data infrastructure{{end}}</p>
    <div class="tech-stack-grid">
        {{ range first 8 (where .Site.RegularPages "Section" "tech").ByWeight }}
        <div class="tech-stack-item">
            {{ $logoPath := printf "img/tech/%s.svg" .Params.logo_placeholder }}
            <div class="tech-stack-logo">
                <img src="{{ $logoPath | relURL }}" alt="{{ .Title }} logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="tech-logo-fallback" style="display:none;">
                    <span>{{ substr .Title 0 1 }}</span>
                </div>
            </div>
            <h3>{{ .Title }}</h3>
        </div>
        {{ end }}
    </div>
    {{ with site.GetPage "section" "tech" }}
    <p style="text-align: center; margin-top: 2rem;">
        <a href="{{ .RelPermalink }}" class="feature-link">{{ if eq $.Language.Lang "fr" }}Voir toutes les technologies{{else}}View all technologies{{end}} →</a>
    </p>
    {{ end }}
</section>

<!-- Benefits Section -->
<section class="benefits">
    <h2>{{ i18n "whyChooseUs" }}</h2>
    <div class="benefits-grid">
        {{ range (where .Site.RegularPages "Section" "benefits") }}
        <div class="benefit-item">
            {{ with .Params.icon }}
            <span class="benefit-icon">{{ . }}</span>
            {{ end }}
            <h3>{{ .Title }}</h3>
            <p>{{ .Content }}</p>
        </div>
        {{ end }}
    </div>
</section>

<!-- Footer CTA -->
<section class="service-cta">
    <h2>{{ i18n "readyToStart" }}</h2>
    <a href="{{ relLangURL "contact" }}" class="cta-button">{{ i18n "getInTouch" }}</a>
    </section>
{{ end }}
